{% extends 'core/base.html' %}

{% load static %}

{% block styleLink %}
<link rel="stylesheet" href="{% static 'css/contacto.css' %}">
{% endblock styleLink %}

{% block title %}Contacto{% endblock title %}

{% block content %}

<main role="main">
    <div class="container-fluid">
        <div class="row  arbol">
            <div class="col-md-6 col-sm-12 align-self-center">
                <div class="row justify-content-center">
                    <h1 class="display-4 mt-4">Bienvenido</h1>
                    <p class=" lead text-center mt-3">Unete a nuestra comunidad y enterate de todo lo que
                        sucede en nuestro amado medio ambiente</p>
                </div>
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img class="d-block center-block" src="{% static 'img/iconos/logoarboles_sin_letra.png'%}"
                                alt="First slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block" src="{% static 'img/iconos/deforestation.png'%}" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block" src="{% static 'img/iconos/leaves.png'%}" alt="Third slide">
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
              </div>
                <div class="col-md-6 col-sm-12 contacto p-5">
                  <div class="bg-faded rounded p-5">
                    <h1 class="section-heading-upper d-flex justify-content-center">Contactenos</h1>
                <!-- <h3 class="section-heading">
                  <span class="subtitle lead">Envíanos tus dudas</span>
                </h3> -->

                <!-- Formulario de contacto -->
                {% if 'ok' in request.GET %}
                <p class="mx-auto"><b>Su mensaje se ha enviado correctamente, en breve nos pondremos en contacto con Usted.</b></p>
                {% endif %}

                <form action="" method="POST" class="needs-validation" novalidate>{% csrf_token %}
                  {% if user.is_authenticated %}
                  <!-- SI EL USUARIO ESTA LOGUEADO CARGA LOS DATOS DESDE SU INFORMACION DE CUENTA -->
                  <div class="form-row mt-3">
                    <div class="col-md-6 col-sm-12">
                      <label for="username">Nombre: </label>
                      {{request.user.first_name}}
                    </div>
                  </div>
                  <div class="form-row mt-3">
                    <div class="col-md-6 col-sm-12">
                      <label for="surname">Apellido: </label >
                      {{request.user.last_name}}
                    </div>
                  </div>
                  <div class="form-row mt-3">
                    <div class="col-md-12 col-sm-12">
                      <label for="email">Email: </label>
                      {{request.user.email}}
                    </div>
                  </div>
                  {% else %}
                  <!-- SI EL USUARIO NO ESTÁ LOGUEADO CARGA LOS DATOS DESDE LOS IMPUTS -->
                  <div class="form-row mt-3">
                    <label class='required' for='username'>Nombre </label>
                    {{form.name}}
                    <div class="invalid-feedback">
                      Este campo es requerido
                    </div>
                    {{form.name.errors}}
                  </div>
                  <div class="form-row mt-3">
                    <label class='required' for='surname'>Apellido</label class='required'>
                    {{form.surname}}
                    <div class="invalid-feedback">
                      Este campo es requerido
                    </div>
                    {{form.surname.errors}}
                  </div>
                  <div class="form-row mt-3">
                    <label class='required' for='email'>Email</label>
                    {{form.email}}
                    <div class="invalid-feedback">
                      Ingrese un email válido
                    </div>
                    {{form.email.errors}}
                  </div>
                  {% endif %}
                  <div class="form-row mt-3">
                    <div class="col-md-12 col-sm-12">
                      <label class='required' for='subject'>Asunto</label>
                      {{form.subject}}
                      <div class="invalid-feedback">
                        Este campo es requerido
                      </div>
                    </div>
                    {{form.subject.errors}}
                  </div>
                  <div class="form-row mt-3">
                    <div class="col-md-12 col-sm-12">

                      <label class='required' for='content'>Mensaje</label >
                      {{form.content}}
                      <div class="invalid-feedback">
                        Este campo es requerido
                      </div>
                    </div>
                    {{form.content.errors}}
                  </div>
                  <input type="submit" class="col-3 mx-auto mt-3 btn btn-info btn-block py-2" value="Enviar">
                </form>
                <!-- Fin formulario de contacto -->
              </div>
            </div>
      </div>
    </div>

</main>
<style>
  .required:after {
    content: ' *';
    color: red;
  } 
</style>
<script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields
  (function () {
    'use strict';
    window.addEventListener('load', function () {
      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      var forms = document.getElementsByClassName('needs-validation');
      // Loop over them and prevent submission
      var validation = Array.prototype.filter.call(forms, function (form) {
        form.addEventListener('submit', function (event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();
</script>
{% endblock content %}